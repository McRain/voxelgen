(()=>{"use strict";var e,t={33:(e,t,n)=>{var o={};n.r(o),n.d(o,{user:()=>s});var r=n(751),l=n(302),a=n(953);l.A.default||l.A;const s=(0,a.Kh)({id:"mee"});var i=n(641);const u={class:"app-container"};var c=n(414);const d={class:"app-container"},p={key:0,class:"file-upload-panel"},h={class:"file-input-container"},f={key:0,class:"file-name"},b={key:0,class:"upload-status"},g={key:1,class:"uploaded-files"},v=["onClick"],y={class:"control-panel"},m={class:"buttons-group"},k={class:"sliders-group"},w={class:"slider-container"},B={class:"slider-container"},S={class:"slider-container"},x={class:"slider-container"};var L=n(888),V=n(51),F=n(922),O=n(409);let E;F.eaF.prototype.raycast=O.zQ,F.LoY.prototype.computeBoundsTree=O.LO,F.LoY.prototype.disposeBoundsTree=O.je,F.$Ed.prototype.computeBoundsTree=O.K5,F.$Ed.prototype.disposeBoundsTree=O.Of,F.$Ed.prototype.raycast=O.zQ;let P,j=!1,A={model:"Torus Knot",scale:1.5,resolution:40,solid:!1,displayMesh:!0,displayBounds:!1,insideOnly:!1,rebuild:()=>j=!0};const M=new F._4j({transparent:!0,opacity:1});function C(e){E.add(e.model),P=e,j=!0}function z(e){A={...A,...e},j=!0}var I=n(747);class _{constructor(e){this.name="WorkerBase",this.running=!1,this.worker=e,this.worker.onerror=e=>{throw e.message?new Error(`${this.name}: Could not create Web Worker with error "${e.message}"`):new Error(`${this.name}: Could not create Web Worker.`)}}runTask(){}generate(...e){if(this.running)throw new Error("GenerateMeshBVHWorker: Already running job.");if(null===this.worker)throw new Error("GenerateMeshBVHWorker: Worker has been disposed.");this.running=!0;const t=this.runTask(this.worker,...e);return t.finally(()=>{this.running=!1}),t}dispose(){this.worker.terminate(),this.worker=null}}class W extends _{constructor(){super(new Worker(new URL(n.p+n.u(231),n.b),{type:void 0})),this.name="GenerateMeshBVHWorker"}runTask(e,t,n={}){return new Promise((o,r)=>{if(t.getAttribute("position").isInterleavedBufferAttribute||t.index&&t.index.isInterleavedBufferAttribute)throw new Error("GenerateMeshBVHWorker: InterleavedBufferAttribute are not supported for the geometry attributes.");e.onerror=e=>{r(new Error(`GenerateMeshBVHWorker: ${e.message}`))},e.onmessage=l=>{const{data:a}=l;if(a.error)r(new Error(a.error)),e.onmessage=null;else if(a.serialized){const{serialized:r,position:l}=a,s=I.G.deserialize(r,t,{setIndex:!1}),i=Object.assign({setBoundingBox:!0},n);if(t.attributes.position.array=l,r.index)if(t.index)t.index.array=r.index;else{const e=new F.THS(r.index,1,!1);t.setIndex(e)}i.setBoundingBox&&(t.boundingBox=s.getBoundingBox(new F.NRn)),n.onProgress&&n.onProgress(a.progress),o(s),e.onmessage=null}else n.onProgress&&n.onProgress(a.progress)};const l=t.index?t.index.array:null,a=t.attributes.position.array,s=[a];l&&s.push(l),e.postMessage({index:l,position:a,options:{...n,onProgress:null,includedProgressCallback:Boolean(n.onProgress),groups:[...t.groups]}},s.map(e=>e.buffer).filter(e=>"undefined"==typeof SharedArrayBuffer||!(e instanceof SharedArrayBuffer)))})}}var T=n(96),Q=n(566);const $=new F.V9B({transparent:!0,wireframe:!0,depthWrite:!1,opacity:.02});let G,U;const X={name:"FileManagerApp",data:()=>({selectedFile:null,uploadStatus:"",uploadedFiles:[],switch1:!1,switch2:!1,scaleValue:1.5,resolutionValue:40,opacityValue:1,filePanel:!1,sizeValue:1}),methods:{handleFileSelect(e){console.log(e);const t=e.target.files;t.length>0&&(this.selectedFile=t[0],console.log(this.selectedFile),this.uploadFile())},async uploadFile(){if(!this.selectedFile)return;G&&(E.remove(G),G=null),this.uploadStatus="Загрузка...";const e=await this.selectedFile.arrayBuffer();(new L.B).setMeshoptDecoder(V.f).parse(e,"",e=>{G=e.scene.children[0],G.geometry.center(),G.material=$,G.scale.setScalar(this.scaleValue),(new W).generate(G.geometry).then(e=>{U=e,C({model:G,bvh:e}),this.filePanel=!1})})},removeFile(e){this.uploadedFiles.splice(e,1)},formatFileSize(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},handleButton1(){this.filePanel=!0},handleButton2(){},handleButton3(){!function(e){const t=function(e){const{geometry:t,count:n}=e,o=[],r=new F.kn4;for(let l=0;l<n;l++){e.getMatrixAt(l,r);const n=t.clone();n.applyMatrix4(r),o.push(n)}return Q.pP(o)}(e),n=new F.eaF(t,e.material);(new T.r).parse(n,e=>{const t=new Blob([e instanceof ArrayBuffer?e:JSON.stringify(e)],{type:e instanceof ArrayBuffer?"application/octet-stream":"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=e instanceof ArrayBuffer?"scene.glb":"scene.gltf",n.click()},{binary:!0})}(undefined)},handleSwitch1(){console.log("Переключатель 1:",this.switch1)},handleSwitch2(){console.log("Переключатель 2:",this.switch2)},handleSlider1(){z({scale:this.scaleValue})},handleSlider2(){z({resolution:this.resolutionValue})},handleOpacity(){var e;e={opacity:this.opacityValue},Object.keys(e).forEach(t=>{M[t]=e[t]})},handleSize(){G.scale.setScalar(this.sizeValue),C({model:G,bvh:U})}}};var H=n(262);const R=(0,H.A)(X,[["render",function(e,t,n,o,l,a){return(0,i.uX)(),(0,i.CE)("div",d,[l.filePanel?((0,i.uX)(),(0,i.CE)("div",p,[t[13]||(t[13]=(0,i.Lk)("h2",null,"Загрузка файла",-1)),(0,i.Lk)("div",h,[(0,i.Lk)("input",{type:"file",id:"fileInput",ref:"fileInput",onChange:t[0]||(t[0]=(...e)=>a.handleFileSelect&&a.handleFileSelect(...e)),class:"file-input"},null,544),t[11]||(t[11]=(0,i.Lk)("label",{for:"fileInput",class:"file-input-label"}," Выберите файл ",-1)),l.selectedFile?((0,i.uX)(),(0,i.CE)("span",f,(0,c.v_)(l.selectedFile.name),1)):(0,i.Q3)("v-if",!0)]),(0,i.Q3)(' <button @click="uploadFile" :disabled="!selectedFile" class="upload-button">\r\n                Загрузить\r\n            </button> '),l.uploadStatus?((0,i.uX)(),(0,i.CE)("div",b,(0,c.v_)(l.uploadStatus),1)):(0,i.Q3)("v-if",!0),l.uploadedFiles.length>0?((0,i.uX)(),(0,i.CE)("div",g,[t[12]||(t[12]=(0,i.Lk)("h3",null,"Загруженные файлы:",-1)),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.uploadedFiles,(e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t},[(0,i.eW)((0,c.v_)(e.name)+" ("+(0,c.v_)(a.formatFileSize(e.size))+") ",1),(0,i.Lk)("button",{onClick:e=>a.removeFile(t),class:"remove-button"}," Удалить ",8,v)]))),128))])])):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" Панель управления "),(0,i.Lk)("div",y,[(0,i.Lk)("div",m,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.handleButton1&&a.handleButton1(...e)),class:"control-button"},"Load model"),(0,i.Q3)(' <button @click="handleButton2" class="control-button">Build</button> '),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.handleButton3&&a.handleButton3(...e)),class:"control-button"},"Download")]),(0,i.Q3)(' <div class="switches-group">\r\n                <div class="switch-container">\r\n                    <label>\r\n                        <input type="checkbox" v-model="switch1" @change="handleSwitch1">\r\n                        Переключатель 1\r\n                    </label>\r\n                </div>\r\n                <div class="switch-container">\r\n                    <label>\r\n                        <input type="checkbox" v-model="switch2" @change="handleSwitch2">\r\n                        Переключатель 2\r\n                    </label>\r\n                </div>\r\n            </div> '),(0,i.Lk)("div",k,[(0,i.Lk)("div",w,[(0,i.Lk)("label",null,"Scale 1: "+(0,c.v_)(l.scaleValue),1),(0,i.bo)((0,i.Lk)("input",{type:"range",min:"0.1",max:"5",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=e=>l.scaleValue=e),onInput:t[4]||(t[4]=(...e)=>a.handleSlider1&&a.handleSlider1(...e)),class:"slider"},null,544),[[r.Jo,l.scaleValue]])]),(0,i.Lk)("div",B,[(0,i.Lk)("label",null,"Resolution: "+(0,c.v_)(l.resolutionValue),1),(0,i.bo)((0,i.Lk)("input",{type:"range",min:"5",max:"75",step:"5","onUpdate:modelValue":t[5]||(t[5]=e=>l.resolutionValue=e),onInput:t[6]||(t[6]=(...e)=>a.handleSlider2&&a.handleSlider2(...e)),class:"slider"},null,544),[[r.Jo,l.resolutionValue]])]),(0,i.Lk)("div",S,[(0,i.Lk)("label",null,"Opacity: "+(0,c.v_)(l.opacityValue),1),(0,i.bo)((0,i.Lk)("input",{type:"range",min:"0",max:"1",step:"0.1","onUpdate:modelValue":t[7]||(t[7]=e=>l.opacityValue=e),onInput:t[8]||(t[8]=(...e)=>a.handleOpacity&&a.handleOpacity(...e)),class:"slider"},null,544),[[r.Jo,l.opacityValue]])]),(0,i.Lk)("div",x,[(0,i.Lk)("label",null,"Model size: "+(0,c.v_)(l.sizeValue),1),(0,i.bo)((0,i.Lk)("input",{type:"number",min:"0",step:"0.05","onUpdate:modelValue":t[9]||(t[9]=e=>l.sizeValue=e),onInput:t[10]||(t[10]=(...e)=>a.handleSize&&a.handleSize(...e)),class:"slider"},null,544),[[r.Jo,l.sizeValue]])])])])])}],["__scopeId","data-v-78ab2f1c"]]),J={data:()=>({inGame:!1}),async mounted(){document.documentElement.setAttribute("data-theme","dark")},components:{Project:R}},K=(0,H.A)(J,[["render",function(e,t,n,o,r,l){const a=(0,i.g2)("Project");return(0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(a)])}]]),D=l.A.default||l.A,N=window.vue=(0,r.Ef)(K);N.use(e=>{e.config.globalProperties.$app=D.Init(o),N.provide("app",e.config.globalProperties.$app)}),N.mount("#app")}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,o),l.exports}o.m=t,e=[],o.O=(t,n,r,l)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,r,l]=e[c],s=!0,i=0;i<n.length;i++)(!1&l||a>=l)&&Object.keys(o.O).every(e=>o.O[e](n[i]))?n.splice(i--,1):(s=!1,l<a&&(a=l));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,r,l]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.u=e=>e+".8a8eb886.chunk.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=792,o.p="/",(()=>{o.b=document.baseURI||self.location.href;var e={792:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,l,[a,s,i]=n,u=0;if(a.some(t=>0!==e[t])){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(i)var c=i(o)}for(t&&t(n);u<a.length;u++)l=a[u],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},n=self.webpackChunkvoxel_creator=self.webpackChunkvoxel_creator||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[489,810,229,760,776,466],()=>o(33));r=o.O(r)})();